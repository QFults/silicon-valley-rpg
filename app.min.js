const characters = [{ id: 0, name: "Richard Hendricks", action: ["https://media1.giphy.com/media/3o7qDXzmWyT3BgcyGc/giphy.mp4?cid=790b7611e616dab7d2760948f655cbcd615dcc6ba543c0b9&rid=giphy.mp4", "https://media0.giphy.com/media/l39770gPr8y8qpWjC/giphy.mp4?cid=790b7611f36249de953ddca479b2d070320575dc9cbeea10&rid=giphy.mp4", "https://media0.giphy.com/media/l1KVbUh3NprfY26R2/giphy.mp4?cid=790b7611f36249de953ddca479b2d070320575dc9cbeea10&rid=giphy.mp4", "https://media0.giphy.com/media/xT4uQczLKWgw6kCvtK/giphy.mp4?cid=790b7611f36249de953ddca479b2d070320575dc9cbeea10&rid=giphy.mp4"], image: "http://www.piedpiper.com/app/themes/pied-piper/dist/images/photo-richard.png", hp: 100 }, { id: 1, name: "Bertram Gilfoyle", action: ["https://media0.giphy.com/media/xUA7b8VnHVOMeTawFO/giphy.mp4?cid=790b761113fcee3d498398a6eb831c0084e395450bf5e494&rid=giphy.mp4", "https://media3.giphy.com/media/l4FGs1GvN2gjJISxq/giphy.mp4?cid=790b761136a4917709ebda9f393968971aefec677e1cc1d1&rid=giphy.mp4", "https://media1.giphy.com/media/F3FBJ0GxSTB1C/giphy.mp4?cid=790b7611edd205d6bfb9244f41aa23c5954ce8e34e753a01&rid=giphy.mp4", "https://media2.giphy.com/media/l0K411OtSrYqVuZlm/giphy.mp4?cid=790b76117e3f338860ab8ae3b28c0e3f1184da0072028df9&rid=giphy.mp4"], image: "http://www.piedpiper.com/app/themes/pied-piper/dist/images/photo-gilfoyle.png", hp: 100 }, { id: 2, name: "Dinesh Chugtai", action: ["https://media1.giphy.com/media/l41YrNEgxAHFTdoRy/giphy.mp4?cid=790b7611db5f196a557466d369134cf067fa84b57987b188&rid=giphy.mp4", "https://media1.giphy.com/media/26FmR9eYh0FvRKlTq/giphy.mp4?cid=790b761150724237369a54963f575cc2679caf25cac28f91&rid=giphy.mp4", "https://media2.giphy.com/media/xUA7bjoUNhwWVCfTR6/giphy.mp4?cid=790b7611ab39b089c41dac0d8cee8937a0147f0d40dcccdb&rid=giphy.mp4", "https://media3.giphy.com/media/3oEduEU5RQ4tkownmg/giphy.mp4?cid=790b761150724237369a54963f575cc2679caf25cac28f91&rid=giphy.mp4"], image: "http://www.piedpiper.com/app/themes/pied-piper/dist/images/photo-dinesh.png", hp: 100 }, { id: 3, name: "Jared Dunn", action: ["https://media3.giphy.com/media/3o6EhWeei7wsp2jc1G/giphy.mp4?cid=790b7611603d003a396f77e9dfcfdd9b8444680e8674d140&rid=giphy.mp4", "https://media2.giphy.com/media/l0K405j6GsSMmCtbO/giphy.mp4?cid=790b76114101dd9cab8cafd36037bd77f64f799572a05302&rid=giphy.mp4", "https://media0.giphy.com/media/l46CzaNW6e3IO0Lkc/giphy.mp4?cid=790b7611925e80515ba124e799c20a744720a1ad213b87c9&rid=giphy.mp4", "https://media2.giphy.com/media/l0K45n9ri8Ye1UtRC/giphy.mp4?cid=790b7611925e80515ba124e799c20a744720a1ad213b87c9&rid=giphy.mp4"], image: "http://www.piedpiper.com/app/themes/pied-piper/dist/images/photo-jared.png", hp: 100 }], move = M.Modal.init(document.querySelector("#modal1"), {}); let fighter = {}, opponent = {}, isFighterChosen = !1, isOpponentChosen = !1, wins = 0; const getRandom = e => Math.floor(30 * Math.random()), shakePage = e => { document.querySelector("body").style.animation = "shake 0.5s", setTimeout(() => { document.querySelector("body").style.animation = "none" }, 500) }, checkWin = e => { if (console.log(fighter.hp, opponent.hp), fighter.hp > 0 && opponent.hp <= 0) if (++wins === characters.length - 1) { document.querySelector("#currentAction").textContent = "", startConfetti(), document.querySelector(`#character-${opponent.id}`).style.animation = "shake 0.5s"; let e = !0; setInterval(() => { e ? (document.querySelector("#currentAction").textContent = "YOU WIN! CONGRATS!", e = !1) : (document.querySelector("#currentAction").textContent = "", e = !0) }, 200), setTimeout(() => { document.querySelector(`#character-${opponent.id}`).style.animation = "none", document.querySelector(`#character-${opponent.id}`).classList.add("hidden"), isOpponentChosen = !1 }, 500) } else { fighter.hp += 20, document.querySelector(`#hp-${fighter.id}`).textContent = `HP: ${fighter.hp}`, document.querySelector("#currentAction").textContent = "", startConfetti(), document.querySelector(`#character-${opponent.id}`).style.animation = "shake 0.5s"; let e = !0, t = setInterval(() => { e ? (document.querySelector("#currentAction").textContent = `YOU DEFEATED ${opponent.name}!`, e = !1) : (document.querySelector("#currentAction").textContent = "", e = !0) }, 200); setTimeout(() => { stopConfetti(), clearInterval(t), document.querySelector("#currentAction").textContent = "CHOOSE YOUR OPPONENT" }, 4e3), setTimeout(() => { document.querySelector(`#character-${opponent.id}`).style.animation = "none", document.querySelector(`#character-${opponent.id}`).classList.add("hidden"), document.querySelector("#currentAction").textContent = "CHOOSE YOUR OPPONENT", isOpponentChosen = !1 }, 500) } else fighter.hp <= 0 && opponent.hp > 0 && (document.querySelector("#currentAction").textContent = "GAME OVER! REFRESH PAGE TO RESTART", document.querySelector(`#character-${fighter.id}`).style.animation = "shake 0.5s") }, selectCharacter = e => { isFighterChosen ? isOpponentChosen || (e.parentNode.parentNode.classList.add("characterChosen"), opponent = characters[parseInt(e.dataset.id)], isOpponentChosen = !0, document.querySelector("#currentAction").textContent = "HIT THE RED BUTTON TO ATTACK", document.querySelector(".gamePlay").style.display = "block", document.querySelector("#opponentName").innerHTML = `\n    <li><img class="characterImageSmall" src="${opponent.image}"> ${opponent.name}</li>\n    `) : (e.parentNode.parentNode.classList.add("characterChosen"), fighter = characters[parseInt(e.dataset.id)], isFighterChosen = !0, document.querySelector("#currentAction").textContent = "CHOOSE YOUR OPPONENT", document.querySelector("#fighterName").innerHTML = `\n    <li><img class="characterImageSmall" src="${fighter.image}"> ${fighter.name}</li>\n    `) }, attack = e => { const t = getRandom() + 10, i = getRandom(); opponent.hp -= t, document.querySelector(`#hp-${opponent.id}`).textContent = `HP: ${opponent.hp}`, document.querySelector(".modal-content").innerHTML = `\n  <h4 style="color: green;">You dealt ${opponent.name} ${t} points of damage!</h4>\n  <video autoplay>\n    <source src="${fighter.action[Math.floor(Math.random() * fighter.action.length)]}" type="video/mp4" >\n  </video>\n  `, move.open(), setTimeout(() => { move.close(), fighter.hp <= 0 && opponent.hp > 0 ? (document.querySelector("#currentAction").textContent = "GAME OVER! REFRESH PAGE TO RESTART", document.querySelector(`#character-${fighter.id}`).style.animation = "shake 0.5s") : opponent.hp <= 0 || fighter.hp <= 0 ? setTimeout(e => checkWin(), 1e3) : (shakePage(), setTimeout(() => { fighter.hp -= i, document.querySelector(`#hp-${fighter.id}`).textContent = `HP: ${fighter.hp}`, document.querySelector(".modal-content").innerHTML = `\n  <h4 style="color: red;">${opponent.name} dealt you ${i} points of damage!</h4>\n  <video autoplay>\n    <source src="${opponent.action[Math.floor(Math.random() * opponent.action.length)]}" type="video/mp4" >\n  </video>\n  `, move.open(), setTimeout(() => { if (move.close(), fighter.hp <= 0 && opponent.hp > 0) { shakePage(), document.querySelector("#overlay").style.display = "block"; let e = !0; setInterval(() => { e ? (document.querySelector("#currentAction").textContent = "GAME OVER! REFRESH PAGE TO RESTART", e = !1) : (document.querySelector("#currentAction").textContent = "", e = !0) }, 200) } }, 2e3) }, 500)) }, 2e3) }; characters.forEach(e => { let t = document.createElement("div"); t.innerHTML = `\n        <div id="character-${e.id}" class="col s3">\n          <div class="card">\n        <div class="card-image">\n          <img class="characterImage" src="${e.image}">\n        </div>\n        <div class="card-content">\n          <p>${e.name}</p>\n          <p id="hp-${e.id}" class="hp">HP: ${e.hp}</p>\n        </div>\n        <div class="card-action">\n          <a id="characterId" data-id="${e.id}" class="waves-effect waves-light btn-small white green-text characterSelectButton">SELECT</a>\n        </div>\n      </div>\n      </div>\n  `, document.querySelector("#characters").append(t) }), document.addEventListener("click", ({ target: e }) => { switch (e.id) { case "characterId": selectCharacter(e); break; case "attack": e.disabled = !0, shakePage(), attack() } });